/**
 * @joyfulljs/scalable v1.0.2
 * (c) 2014-2020 by elvin zhu
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Scalable={})}(this,(function(e){"use strict";var t=["webkit","ms","moz","o"];function n(e,n){var r=n||document.body.style;if(!(e in r))for(var o=e.charAt(0).toUpperCase(),a=e.substr(1),i=0;i<t.length;i++){var s=t[i]+o+a;if(s in r)return s}return e}var r=n("transformOrigin"),o=n("transform");function a(e){var t=window.getComputedStyle(e)[o];return t&&"none"!==t||(t="matrix(1, 0, 0, 1, 0, 0)"),t.replace(/\(|\)|matrix|\s+/g,"").split(",")}function i(e){return window.getComputedStyle(e)[r].split(/\s+/).map(parseFloat)}e.default=function(e,t){var n=t||{},s=n.onScaleChange,f=n.maxScale,l=void 0===f?10:f,u=n.minScale,m=void 0===u?1:u,d=n.followMouse,v=void 0===d||d;if(l<m)throw new Error("[@joyfulljs/scalable] maxScale must be greater than minScale");var c=window.getComputedStyle(e),p=c[r],y=c[o],g=-1,w=-1;function h(t){var n=i(e),r=a(e),f=+r[0];if(!(t.deltaY<0&&f>=l||t.deltaY>0&&f<=m)){var u=.005*t.deltaY,d=Math.min(Math.max(m,f-u),l);if(-1!==g){var v=u*(g-n[0]);r[4]=+r[4]+v}if(-1!==w){var c=u*(w-n[1]);r[5]=+r[5]+c}r[0]=d,r[3]=d,e.style[o]="matrix("+r.join(",")+")",s&&s({scale:d}),t.preventDefault()}}function x(e){g=e.offsetX,w=e.offsetY}function S(){g=-1,w=-1}return e.parentNode.addEventListener("wheel",h),v&&(e.addEventListener("mousemove",x),e.addEventListener("mouseleave",S)),{reset:function(){g=-1,w=-1,e.style[r]=p,e.style[o]=y},destroy:function(){e.parentNode.removeEventListener("wheel",h),e.removeEventListener("mousemove",x),e.removeEventListener("mouseleave",S)}}},e.getTransform=a,e.getTransformOrigin=i,e.transformOriginProperty=r,e.transformProperty=o,Object.defineProperty(e,"__esModule",{value:!0})}));
